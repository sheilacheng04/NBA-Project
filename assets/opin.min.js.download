!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.OPiN=t():e.OPiN=t()}(self,()=>(()=>{var e,t,n,r,o={3869:(e,t,n)=>{"use strict";n.d(t,{n:()=>a});var r=n(1567),o=n(3178),i=function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},a=function(){function e(e,t,n){this.header=e,this.payload=t,this.fetchOptions=n,this.method="GET",this.state=o.Z.getState(),this.config=this.state.config,this.generateBaseURL()}return e.prototype.setMethod=function(e){return this.method=e,this},e.prototype.setHeaders=function(e){var t=this.state,n=t.locale,o=t.logId,a=t.countryCode;if(this.headers=i({locale:n,platform:r.iw},e),a&&(this.headers.country_code=a),o&&(this.headers.log_id=o),this.header)for(var s in this.header)this.header[s]&&(this.headers[s]=this.header[s]);return this},e.prototype.setPath=function(e,t){return void 0===t&&(t=!0),this.path=e,t&&(this.path="/partners"+e),this.requestURL="".concat(this.baseURL).concat(this.path),this},e.prototype.setPayload=function(e){return void 0===e&&(e={}),this.payload=e,this},e.prototype.setParams=function(e){var t=new URL(this.baseURL+this.path);Object.keys(e).forEach(function(n){return t.searchParams.append(n,e[n])});var n=t.toJSON();return this.requestURL=n,this},e.prototype.setCallerConfig=function(){var e={"Content-Type":"application/json"};for(var t in this.headers)this.headers[t]&&(e[t]=this.headers[t]);var n={method:this.method,headers:e};if(this.payload&&(n.body=JSON.stringify(this.payload)),this.fetchOptions)for(var r in this.fetchOptions)n[r]=this.fetchOptions[r];return"DELETE"===this.method&&(n.body={_method:"DELETE"},this.method="POST"),this.requestOptions=n,this},e.prototype.makeCall=function(){return fetch(this.requestURL,this.requestOptions).then(function(e){return e.status>=400?e.json().then(function(e){throw e}):e.json()}).then(function(e){return s(e)}).catch(function(e){throw s(e)})},e.prototype.generateBaseURL=function(){var e=this.config.protocol,t=this.config.host,n=this.config.port,r="/"===this.config.pathname?"":this.config.pathname,o=this.config.builtBackendVersion,i=this.config.apiVersion||"";return this.baseURL="".concat(e,"//").concat(t,":").concat(n).concat(r,"/").concat(o).concat(i),this},e}();function s(e){return{response:e}}},1607:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(){function e(){}return e.prototype.getCookie=function(e){var t=document.cookie.split("; "),n="";return t.some(function(t){var r=t.split("="),o=r[0],i=r[1];return o===e&&(n=i,!0)}),n},e.prototype.deleteCookie=function(e,t,n){document.cookie="".concat(e,"= ; expires = Thu, 01 Jan 1970 00:00:00 GMT; domain = ").concat(t,"; path = ").concat(n)},e.prototype.setCookie=function(e,t,n,r){document.cookie="".concat(e," = ").concat(t,"; domain = ").concat(n,"; path = ").concat(r,";")},e}()},7655:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(3869),o=n(1272),i=n(9455),a=n(3178),s=n(1806),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},u=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const d=function(){function e(){}return e.prototype.detectPartners=function(e){var t={query:e,translation_tags:i.translationTags.detectPartners};return(new r.n).setHeaders().setPath("/detect").setParams(t).setCallerConfig().makeCall().then(function(e){return e.response}).catch(function(e){return new Promise(function(t,n){new s.Z(n,e).init()})})},e.prototype.detectBanners=function(e){return u(this,void 0,void 0,function(){var t,n;return l(this,function(i){switch(i.label){case 0:return t={query:e},[4,o.d.generateFP()];case 1:return n=i.sent(),[2,(new r.n).setHeaders({device_id:n}).setPath("/detect/banners").setParams(t).setCallerConfig().makeCall().then(function(e){return e.response.partners}).catch(function(e){return new Promise(function(t,n){new s.Z(n,e).init()})})]}})})},e.prototype.getPartnerData=function(e,t){return u(this,void 0,Promise,function(){var n;return l(this,function(i){switch(i.label){case 0:return[4,o.d.generateFP()];case 1:return n=i.sent(),[2,(new r.n).setHeaders({device_id:n}).setPath("/".concat(e,"/sync/translations")).setParams(t).setCallerConfig().makeCall().then(function(e){return e.response.translations}).catch(function(e){return new Promise(function(t,n){new s.Z(n,e).init()})})]}})})},e.prototype.getPartnerDetails=function(e,t){return void 0===t&&(t={}),u(this,void 0,Promise,function(){var n;return l(this,function(i){switch(i.label){case 0:return[4,o.d.generateFP()];case 1:return n=i.sent(),[2,(new r.n).setHeaders(c({device_id:n},t)).setPath("/getPartnerDetails").setParams(e).setCallerConfig().makeCall().then(function(e){return e.response}).catch(function(e){return new Promise(function(t,n){new s.Z(n,e).init()})})]}})})},e.prototype.getPartnerList=function(e,t){return void 0===t&&(t={}),u(this,void 0,Promise,function(){var n,i,u;return l(this,function(l){switch(l.label){case 0:return n=a.Z.getState(),i=n.mediaProperties[0],[4,o.d.generateFP()];case 1:return u=l.sent(),[2,(new r.n).setHeaders(c({device_id:u,media_property:i},t)).setPath("/getPartnerList").setParams(e).setCallerConfig().makeCall().then(function(e){return e.response}).catch(function(e){return new Promise(function(t,n){new s.Z(n,e).init()})})]}})})},e.prototype.unlinkPartnerAccount=function(e,t){return void 0===t&&(t={}),u(this,void 0,Promise,function(){var n,i,u,d;return l(this,function(l){switch(l.label){case 0:return n=a.Z.getState(),i=n.mediaProperties[0],[4,this.getPartnerInfo({partner_configuration_uid:e.partner_conf_uid})];case 1:return"no_login_with_plain_redirect_url"!==(u=l.sent()).login_type?[3,2]:(o.d.handlePlainRedirect(u.unlink_redirect_url),[2,Promise.resolve()]);case 2:return[4,o.d.generateFP()];case 3:return d=l.sent(),[2,(new r.n).setMethod("POST").setHeaders(c({device_id:d,media_property:i},t)).setPath("/account_linking/unlinking/unlinkOpinPartnerAcc",!1).setPayload(e).setCallerConfig().makeCall().then(function(e){return e.response}).catch(function(e){return new Promise(function(t,n){new s.Z(n,e).init()})})]}})})},e.prototype.unlinkAllPartnerAccounts=function(e,t){return void 0===t&&(t={}),u(this,void 0,Promise,function(){var n,i,u;return l(this,function(l){switch(l.label){case 0:return n=a.Z.getState(),i=n.mediaProperties[0],[4,o.d.generateFP()];case 1:return u=l.sent(),[2,(new r.n).setMethod("POST").setHeaders(c({device_id:u,media_property:i},t)).setPath("/account_linking/unlinking/unlinkAllPartnerAccByCiamId",!1).setPayload(e).setCallerConfig().makeCall().then(function(e){return e.response}).catch(function(e){return new Promise(function(t,n){new s.Z(n,e).init()})})]}})})},e.prototype.checkEntitlement=function(e,t,n){return void 0===n&&(n=!1),u(this,void 0,Promise,function(){var i,c,u,d;return l(this,function(l){switch(l.label){case 0:return i=a.Z.getState(),c=i.mediaProperties[0],[4,o.d.generateFP()];case 1:return u=l.sent(),d={device_id:u,media_property:c,session_available:n},i.executeWorkflowHeaders&&i.executeWorkflowHeaders["x-ciam-jwt"]&&(d["x-ciam-jwt"]=i.executeWorkflowHeaders["x-ciam-jwt"]),[4,(new r.n).setMethod("POST").setHeaders(d).setPath("/".concat(e,"/check_entitlements?translation_tags=entitlements")).setPayload({subscription:t}).setCallerConfig().makeCall().then(function(e){return e.response}).catch(function(e){return new Promise(function(t,n){new s.Z(n,e).init()})})];case 2:return[2,l.sent()]}})})},e.prototype.getInitiateData=function(e,t){return void 0===t&&(t={}),u(this,void 0,void 0,function(){var n,i,s,u;return l(this,function(l){switch(l.label){case 0:return n=a.Z.getState(),i=n.mediaProperties[0],[4,o.d.generateFP()];case 1:return s=l.sent(),u=new r.n,n.executeWorkflowHeaders&&n.executeWorkflowHeaders["x-ciam-jwt"]&&(t=c(c({},t),{"x-ciam-jwt":n.executeWorkflowHeaders["x-ciam-jwt"]}),u.setMethod("POST")),[2,u.setHeaders(c({device_id:s,media_property:i},t)).setPath("/".concat(e,"/initiate_workflow")).setCallerConfig().makeCall().then(function(e){return e.response})]}})})},e.prototype.getLogId=function(e){return u(this,void 0,Promise,function(){var t,n,i;return l(this,function(c){switch(c.label){case 0:return t=a.Z.getState(),n=t.mediaProperties[0],[4,o.d.generateFP()];case 1:return i=c.sent(),[2,(new r.n).setMethod("GET").setHeaders({device_id:i,media_property:n}).setPath("/".concat(e,"/generate_log_id")).setCallerConfig().makeCall().then(function(e){return e.response.log_id}).catch(function(e){return new Promise(function(t,n){new s.Z(n,e).init()})})]}})})},e.prototype.getPartnerInfo=function(e){return u(this,void 0,Promise,function(){return l(this,function(t){return[2,(new r.n).setMethod("GET").setHeaders().setPath("/partner_info").setParams(e).setCallerConfig().makeCall().then(function(e){return e.response}).catch(function(e){return new Promise(function(t,n){new s.Z(n,e).init()})})]})})},e}()},8736:(e,t,n)=>{"use strict";n.d(t,{Z:()=>c,q:()=>o});var r,o,i=n(3178),a=n(1607),s=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});!function(e){e.dev="opin_session_dev",e.stag="opin_session_stag",e.prod="opin_session",e.default="opin_session"}(o||(o={}));const c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.cookieSessionEnv={dev:o.dev,stag:o.stag,prod:o.prod,default:o.default},t}return s(t,e),t.prototype.getCookieSession=function(){var e=i.Z.getState(),t=this.cookieSessionEnv[e.env];return this.getCookie(t)},t.prototype.setOpinSession=function(e){var t=i.Z.getState(),n=this.cookieSessionEnv[t.env],r=encodeURIComponent(JSON.stringify(e));return this.setCookie(n,r,t.cookieDomain,"/"),r},t.prototype.clearSession=function(){var e=i.Z.getState(),t=e.env,n=e.cookieDomain,r=this.cookieSessionEnv[t];this.deleteCookie(r,n,"/")},t}(a.Z)},1567:(e,t,n)=>{"use strict";n.d(t,{Hj:()=>s,iw:()=>a});var r,o,i,a="web",s="en_US";!function(e){e.DEFULT="",e.LOCALDEV="",e.DEV="/5.1.0",e.PRODUCTION="/5.1.0"}(r||(r={})),function(e){e.DEFAULT="https://stag-opin-websdk.nba.com",e.LOCALDEV="http://localhost:8000",e.STAGING="https://stag-opin-websdk.nba.com",e.PRODUCTION="https://opin-websdk.nba.com"}(o||(o={})),function(e){e.OPiN_SESSION="OPiN_session",e.DUMMY_STORAGE="dummyDataSave",e.QUERY="query"}(i||(i={}))},1806:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(3178),o=n(7772),i=n(3091),a=n(5161),s=n(9401),c=n(8320),u=n(9134),l="something_went_wrong",d="Something went wrong, Please try again later.",f=function(){return f=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},f.apply(this,arguments)},p=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},h=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},y=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};const _=function(){function e(e,t,n){this.errorHandler=e,this.errorData=t,this.login_type=n,this.event=(0,a._)(),this.clientError={}}return e.prototype.isApiError=function(e){return"error_screen"===e.response.type||"error_data"===e.response.type},e.prototype.init=function(){var e,t,n,r,o,i;return p(this,void 0,void 0,function(){var a,s,c,p;return h(this,function(h){return this.errorData&&!(null===(e=this.errorData)||void 0===e?void 0:e.response)?[2,this.errorHandler(new u.Z({payload:this.errorData,clientError:{type:(null===(n=null===(t=this.errorData)||void 0===t?void 0:t.response)||void 0===n?void 0:n.error_type)||l,message:(null===(o=null===(r=this.errorData)||void 0===r?void 0:r.response)||void 0===o?void 0:o.error_message)||d}}).init())]:this.isApiError(this.errorData)?[2,this.handleErrorData(this.errorData)]:(null===(i=null==this?void 0:this.errorData)||void 0===i?void 0:i.response)?(a={},s=this.errorData.response,c=s.client_error,p=y(s,["client_error"]),a=f(f({},p),c?{clientError:c}:{clientError:{type:l,message:d}}),[2,this.errorHandler(new u.Z(a).init())]):[2,this.errorHandler(new u.Z({clientError:{type:l,message:d}}).init())]})})},e.prototype.handleErrorData=function(e){var t,n,a,s,c,y,_;return p(this,void 0,void 0,function(){var p,w,v,g;return h(this,function(h){return p=r.Z.getState(),w=p.showErrorScreen,this.clientError=(null===(t=null==e?void 0:e.response)||void 0===t?void 0:t.client_error)||{type:(null===(n=null==e?void 0:e.response)||void 0===n?void 0:n.error_type)||l,message:(null===(a=null==e?void 0:e.response)||void 0===a?void 0:a.error_message_data)||(null===(s=null==e?void 0:e.response)||void 0===s?void 0:s.error_message)||d},p.workFlow.entitlementScreen?(g={type:null===(c=null==e?void 0:e.response)||void 0===c?void 0:c.type,screenData:f(f({},null===(y=null==e?void 0:e.response)||void 0===y?void 0:y.screen_data),{errorType:null===(_=null==e?void 0:e.response)||void 0===_?void 0:_.error_type}),clientError:this.clientError},w?(this.event.publish(o.f.SCREEN_TYPE,g),this.handleErrorAcknowledgement(),this.handleEntitlementRetry(),[2]):((0,i.v)(),[2,this.errorHandler(new u.Z(g).init())])):(v={type:e.response.error_type||l,screenData:e.response,clientError:this.clientError},(0,i.v)(),[2,this.errorHandler(new u.Z(v).init())])})})},e.prototype.handleErrorAcknowledgement=function(){var e=this;(0,a._)().subscribe(o.f.COMLPETE_ERROR_WORKFLOW,function(t){var n=t.detail,r={clientError:e.clientError};n.removeShadowDom(),e.errorHandler(new u.Z(r).init())})},e.prototype.handleEntitlementRetry=function(){var e=this;(0,a._)().subscribe(o.f.ENTITLEMENT_RETRY,function(t){var n=t.detail.setIsRetryLoading;return p(e,void 0,void 0,function(){var e,t,o,i,a,u,l,d,p;return h(this,function(h){switch(h.label){case 0:e=r.Z.getState(),t=e[this.login_type],o=t.checkEntitlement,i=t.partnerConfigUid,a=t.entitlementData,u=t.resolve,l=t.transaction_identifier,d=t.reject,h.label=1;case 1:return h.trys.push([1,3,4,5]),n(!0),[4,o(i,a)];case 2:return p=h.sent(),n(!1),"selection_screen"===p.type?[2,new c.Z(u,d).init(i,f(f({},p),{transaction_identifier:l}))]:("no_login"===this.login_type?new s.Z(u,p).init(i):new s.Z(u,f(f({},p),{transaction_identifier:l})).init(i,this.login_type),[3,5]);case 3:return h.sent(),n(!1),[3,5];case 4:return n(!1),[7];case 5:return[2]}})})})},e}()},9134:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=function(){function e(e){this.errorObject=e}return e.prototype.init=function(){return this.errorObject},e}()},8320:(e,t,n)=>{"use strict";n.d(t,{Z:()=>_});var r=n(3178),o=n(1272),i=n(3869),a=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const c=function(){function e(){}return e.prototype.productSelection=function(e,t,n){return void 0===n&&(n=!1),a(this,void 0,void 0,function(){var a,c,u;return s(this,function(s){switch(s.label){case 0:return a=r.Z.getState(),c=a.mediaProperties[0],[4,o.d.generateFP()];case 1:return u=s.sent(),[4,(new i.n).setMethod("POST").setHeaders({device_id:u,media_property:c,session_available:n}).setPath("/".concat(e,"/product_selection")).setPayload({data:t}).setCallerConfig().makeCall()];case 2:return[2,s.sent()]}})})},e}();var u=n(5161),l=n(7772),d=n(9401),f=n(1806),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)},h=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},y=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const _=function(){function e(e,t){this.successHandler=e,this.errorHandler=t}return e.prototype.init=function(e,t){var n=this,r=(0,u._)(),o=t.transaction_identifier,i={type:"selection_screen",screenData:t};r.publish(l.f.SCREEN_TYPE,i),r.subscribe(l.f.PRODUCT_SELECTION,function(t){var r=t.detail;return h(n,void 0,void 0,function(){var t,n,i,a;return y(this,function(s){switch(s.label){case 0:t=r.data,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,(new c).productSelection(e,t)];case 2:return n=s.sent(),i=n.response,new d.Z(this.successHandler,p(p({},i),{transaction_identifier:o})).init(e),[3,4];case 3:return a=s.sent(),new f.Z(this.errorHandler,a).init(),[3,4];case 4:return[2]}})})})},e}()},9401:(e,t,n)=>{"use strict";n.d(t,{Z:()=>d});var r=n(8736),o=n(3178),i=n(7772),a=n(3091),s=n(5161),c=function(){return c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},c.apply(this,arguments)},u=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},l=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const d=function(){function e(e,t){this.successHandler=e,this.successData=t,this.event=(0,s._)()}return e.prototype.init=function(e,t){return u(this,void 0,void 0,function(){return l(this,function(n){return"one_click_redirect"===t?this.handleSessionData(this.successData):this.handleSucessData(this.successData,e),[2]})})},e.prototype.handleSucessData=function(e,t){var n,s,u=o.Z.getState(),l=u.isRedirect,d=u.redirectUrl,f=u.workFlow,p=u.showSuccessScreen,h=u.executeWorkflowOption,y=null==e?void 0:e.data,_=null===(n=null==e?void 0:e.workflow_obj)||void 0===n?void 0:n.paytype,w=null===(s=null==e?void 0:e.workflow_obj)||void 0===s?void 0:s.session_id,v=null==e?void 0:e.screen_data,g={type:null==e?void 0:e.type,screenData:v},b={pcid:t,tid:e.transaction_identifier},m={opintoken:y,is_redirect:l,execute_workflow_option:h};if(void 0!==_&&(m.paytype=_),w&&(m.session_id=w),l&&(m.redirect_url=decodeURIComponent(d)),!f.entitlementScreen){var S=c({},e);return delete S.data,delete S.extraInfo,m.screenData=c({},S),(0,a.v)(),(new r.Z).setOpinSession(b),this.successHandler(m)}if(!p)return(0,a.v)(),(new r.Z).setOpinSession(b),this.successHandler(m);this.event.publish(i.f.SCREEN_TYPE,g),this.handleSuccessAcknowledgement(m,b)},e.prototype.handleSuccessAcknowledgement=function(e,t){var n=this;(0,s._)().subscribe(i.f.COMLPETE_WORKFLOW,function(o){o.detail.removeShadowDom(),(new r.Z).setOpinSession(t),n.successHandler(e)})},e.prototype.handleSessionData=function(e){var t=o.Z.getState(),n=t.isRedirect,i=t.redirectUrl,s=(e.response||{}).metadata,u=void 0===s?{}:s,l=u.opintoken,d=u.opinSessionData,f=u.opinTranslations,p=u.workflow_obj,h=c({opintoken:l,is_redirect:n},f);return void 0!==(null==p?void 0:p.paytype)&&(h.paytype=null==p?void 0:p.paytype),(null==p?void 0:p.session_id)&&(h.session_id=null==p?void 0:p.session_id),n&&(h.redirect_url=decodeURIComponent(i)),(0,a.v)(),(new r.Z).setOpinSession(d),this.successHandler(h)},e}()},9346:(e,t,n)=>{"use strict";n.d(t,{$:()=>r});var r=function(e){var t=e.selector,r=e.type,o=e.screenData;return Promise.all([n.e(920),n.e(216)]).then(n.bind(n,3098)).then(function(e){return(0,e.widget)({selector:t,type:r,screenData:o})})}},3716:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>m});var r,o=n(1607),i=n(7655),a=n(1806),s=n(9401),c=n(9346),u=n(3178),l=n(1272),d=n(4812),f=(r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},r(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),p=function(){return p=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},p.apply(this,arguments)},h=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},y=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},_=l.d.clearOpinSdkParams,w=l.d.generateSecurityToken,v=l.d.encodeForStorage,g=l.d.decodeFromStorage,b=l.d.cleanupOldStorageEntries;const m=function(e){function t(t){var n=e.call(this)||this;return n.partnerInstance=t,n.securityTokenKey="opin-oauth-security-token",n.oauthStateKeyPrefix="opin-oauth-state-",n}return f(t,e),t.prototype.initiateWorkflow=function(e){var t=this,n=e.partnerConfigUid,r=e.executeWorkflowOption;return new Promise(function(e,o){return h(t,void 0,void 0,function(){var t,l,d,f,_=this;return y(this,function(g){switch(g.label){case 0:return t=u.Z.getState(),l=t.workFlow.selector,d=null===(f=t.workFlow)||void 0===f?void 0:f.loader,t.workFlow.entitlementScreen?[4,(0,c.$)({selector:l,type:"loader",screenData:{loader:d}})]:[3,2];case 1:g.sent(),g.label=2;case 2:return[2,(new i.Z).getInitiateData(n).then(function(t){return h(_,void 0,void 0,function(){var o,a,c,l,d,f,h,_,g,m,S,E,O,P,k,T,I,R,N,C,x,D,A,j;return y(this,function(y){switch(y.label){case 0:return o=Date.now(),"success_data"===t.type&&t.metadata?(a=t.log_id,c=t.metadata,l=t.partner_configuration.login_type,u.Z.setState(p(p({},u.Z.getState()),{logId:a,executeWorkflowOption:r})),d=u.Z.getState(),u.Z.setState(p(p({},d),{oauth_service:p(p({},d.oauth_service||{}),{checkEntitlement:(new i.Z).checkEntitlement,partnerConfigUid:n,entitlementData:p({},c)})})),[4,(new i.Z).checkEntitlement(n,p({},c))]):[3,2];case 1:return f=y.sent(),new s.Z(e,f).init(n,l),[2];case 2:return h=t.partner_configuration,_=t.log_id,g=t.redirect_url,m=h.oauth_service,S=h.is_oauth_pkce_enabled,E=h.code_verifier,O=h.entitlement_screen_workflow,P=m.url,k=w(),T=u.Z.getState(),I=T.workFlow,R=T.locale,N=T.mediaProperties,C=T.cookieDomain,x={logId:_,locale:R,mediaProperties:N,pcid:n,showSuccessScreen:O.primary.success,showErrorScreen:O.primary.error,isOauthPkceEnabled:S,executeWorkflowOption:r,timestamp:o},D={security_token:k,isRevamp:!0,redirect_url:(null==r?void 0:r.override_redirect_url)?null==r?void 0:r.override_redirect_url:g,loader:I.loader,timestamp:o},T.executeWorkflowHeaders&&T.executeWorkflowHeaders["x-ciam-jwt"]&&(x.ciam_jwt=T.executeWorkflowHeaders["x-ciam-jwt"]),b(this.oauthStateKeyPrefix,o),A="".concat(this.oauthStateKeyPrefix).concat(o),localStorage.setItem(A,v(x)),j=v(D),localStorage.setItem(this.securityTokenKey,k),S&&this.setCookie("oauth-code-verifier_".concat(n),E,C,"/"),P&&P.indexOf("?")?P+="&state=".concat(j):P+="?state=".concat(j),window.open(P,"_self"),[2]}})})}).catch(function(e){new a.Z(o,e).init()})]}})})})},t.prototype.completeWorkflow=function(e,t){return h(this,void 0,void 0,function(){var n,r,o,i,a,s,c,l,d,f,h,w,v,b,m,S,E,O,P,k;return y(this,function(y){if(n=u.Z.getState(),r=e.oauth_payload,o=e.oauth_state,i=r,a=JSON.parse(decodeURIComponent(o)),s=a.security_token,c=a.timestamp,l="".concat(this.oauthStateKeyPrefix).concat(c),!(d=localStorage.getItem(l)))throw _(),new Error("OPiN SDK: OAuth state not found in localStorage. The authentication session may have expired or been cleared.");return f=g(d),h=f.logId,w=f.locale,v=f.mediaProperties,b=f.pcid,m=f.showSuccessScreen,S=f.isOauthPkceEnabled,E=f.executeWorkflowOption,O=f.showErrorScreen,P=localStorage.getItem(this.securityTokenKey),_(),u.Z.setState(p(p(p({},n),{logId:h,locale:w,mediaProperties:v,showSuccessScreen:m,showErrorScreen:O,executeWorkflowOption:E}),f.ciam_jwt&&{executeWorkflowHeaders:{"x-ciam-jwt":f.ciam_jwt}})),localStorage.removeItem(this.securityTokenKey),localStorage.removeItem(l),S&&(k=this.getCookie("oauth-code-verifier_".concat(b)),i=p(p({},i),{code_verifier:k}),this.deleteCookie("oauth-code-verifier_".concat(b),n.cookieDomain,"/")),s===P?[2,this.getAccessToken(i,b,t)]:[2,this.getErrorTranslation(b)]})})},t.prototype.getAccessToken=function(e,t,n){return h(this,void 0,void 0,function(){var r,o,a,s;return y(this,function(c){switch(c.label){case 0:return[4,(new d.default).getAccessToken(t,e)];case 1:return r=c.sent(),u.Z.setState(p(p({},u.Z.getState()),((s={})[n]=p(p({},u.Z.getState()[n]),{checkEntitlement:(new i.Z).checkEntitlement,partnerConfigUid:t,transaction_identifier:r.response.data.transaction_identifier,entitlementData:r.response.data}),s))),[4,(new i.Z).checkEntitlement(t,r.response.data)];case 2:return o=c.sent(),a=r.response.data.transaction_identifier,[2,{partnerConfigUid:t,entitlementResponse:p(p({},o),{transaction_identifier:a})}]}})})},t.prototype.getErrorTranslation=function(e){return h(this,void 0,void 0,function(){var t;return y(this,function(n){return t={opin_error:{system_error_code:"oauth_security_token_mismatch"}},[2,(new d.default).getErrorTranslation(e,t)]})})},t}(o.Z)},4812:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>c});var r=n(3869),o=n(1272),i=n(1806),a=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},s=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const c=function(){function e(){}return e.prototype.getAccessToken=function(e,t){return a(this,void 0,void 0,function(){var n;return s(this,function(a){switch(a.label){case 0:return[4,o.d.generateFP()];case 1:return n=a.sent(),[2,(new r.n).setMethod("POST").setHeaders({device_id:n}).setPath("/".concat(e,"/oauth_login/get_access_token")).setPayload({oauth_service:t}).setCallerConfig().makeCall().then(function(e){return e}).catch(function(e){return new Promise(function(t,n){new i.Z(n,e).init()})})]}})})},e.prototype.getErrorTranslation=function(e,t){return a(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return[4,o.d.generateFP()];case 1:return n=i.sent(),[2,(new r.n).setMethod("GET").setHeaders({device_id:n}).setPath("/".concat(e,"/translated_error_screen")).setParams({query:JSON.stringify(t)}).setCallerConfig().makeCall()]}})})},e.prototype.getRefreshToken=function(e,t){return a(this,void 0,void 0,function(){var n;return s(this,function(i){switch(i.label){case 0:return[4,o.d.generateFP()];case 1:return n=i.sent(),[2,(new r.n).setMethod("POST").setHeaders({device_id:n}).setPath("/".concat(e,"/oauth_login/refresh_token")).setPayload({oauth_service:t}).setCallerConfig().makeCall()]}})})},e}()},8874:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>l});var r=n(3178),o=n(7772),i=n(1272),a=n(5161),s=function(){return s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},s.apply(this,arguments)},c=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},u=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const l=function(){function e(e){this.partnerInstance=e}return e.prototype.completeWorkflow=function(e){return c(this,void 0,void 0,function(){var t=this;return u(this,function(o){return[2,new Promise(function(){return c(t,void 0,void 0,function(){var t,o,i,a,c,l,d;return u(this,function(u){switch(u.label){case 0:return t=e.pcid,o=e.status,i=e.partner_login_type,a=e.locale,c=e.media_property,l=r.Z.getState(),r.Z.setState(s(s({},l),{locale:a,mediaProperties:[c]})),"error"===o?[2,this.showErrorScreen(e)]:[4,n(4606)("./".concat(i))];case 1:return d=u.sent(),[2,(new(0,d.default)).initiateWorkflow({partnerConfigUid:t})]}})})})]})})},e.prototype.showErrorScreen=function(e){return c(this,void 0,void 0,function(){var t=this;return u(this,function(n){return i.d.clearOpinSdkParams(),[2,new Promise(function(){var n=(0,a._)(),r={type:"one_click_error_screen",screenData:e};n.publish(o.f.SCREEN_TYPE,r),n.subscribe(o.f.ONE_CLICK_PARTNER_CONFIG_ERROR,function(){return c(t,void 0,void 0,function(){var t;return u(this,function(n){return t=new URL(e.origin),window.open(t,"_self"),[2]})})})})]})})},e}()},3178:(e,t,n)=>{"use strict";n.d(t,{Z:()=>r});const r=new(function(){function e(e){void 0===e&&(e={}),this.state=e}return e.prototype.getState=function(){return this.state},e.prototype.setState=function(e){this.state=e},e}())},1272:(e,t,n)=>{"use strict";n.d(t,{d:()=>i});var r=n(3178),o=function(){return o=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},o.apply(this,arguments)},i=function(){function e(){}return e.isString=function(e){return"string"==typeof e},e.isObject=function(e){return"object"==typeof e},e.objectIsEmpty=function(e){return!(Object.keys(e).length>0)},e.objectHasKey=function(e,t){return!!e[t]},e.generateFP=function(){return new Promise(function(e){var t=r.Z.getState();return t.deviceId?e(t.deviceId):n.e(723).then(n.bind(n,5723)).then(function(t){return t.default.load().then(function(e){return e.get()}).then(function(t){r.Z.setState(o(o({},r.Z.getState()),{deviceId:t.visitorId})),e(t.visitorId)})})})},e.throwError=function(e){throw e},e.parseJSON=function(e){if(e)return JSON.parse(e)},e.isURLValid=function(e){try{return new URL(e),!0}catch(e){var t=e;return this.throwError(new SyntaxError(t.message))}},e.generateSecurityToken=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",n=0;n<30;n++)e+=t.charAt(Math.floor(36*Math.random()));return e},e.clearOpinSdkParams=function(){var e=new URL(window.location.href);["opin_status","state"].forEach(function(t){return e.searchParams.delete(t)}),window.history.replaceState({},"",e.href)},e.validateDOM=function(e){if(!document.querySelector(e))throw"Pass a Valid DOM Selector"},e.handlePlainRedirect=function(e){window.location.href=e},e.encodeForStorage=function(e){return btoa(encodeURIComponent(JSON.stringify(e))).replace(/=+$/,"")},e.decodeFromStorage=function(e){for(var t=e;t.length%4!=0;)t+="=";return JSON.parse(decodeURIComponent(atob(t)))},e.cleanupOldStorageEntries=function(e,t){try{Object.keys(localStorage).filter(function(t){return t.startsWith(e)}).forEach(function(n){var r=parseInt(n.replace(e,""),10);!isNaN(r)&&r<t&&localStorage.removeItem(n)})}catch(t){console.warn('OPiN SDK: Failed to cleanup old storage entries with prefix "'.concat(e,'":'),t)}},e}()},7772:(e,t,n)=>{"use strict";n.d(t,{f:()=>r});var r={INJECT_STYLES:"INJECT_STYLES",INJECT_BANNER_STYLES:"INJECT_BANNER_STYLES",TRADITIONAL_EVENT:"TRADITIONAL_EVENT",NO_LOGIN:"NO_LOGIN",ON_NETWORK_ONLY:"ON_NETWORK_ONLY",TWO_FA:"TWO_FA",TWO_FA_VERIFICATION:"TWO_FA_VERIFICATION",ONE_CLICK_PARTNER_CONFIG_ERROR:"ONE_CLICK_PARTNER_CONFIG_ERROR",PRODUCT_SELECTION:"PRODUCT_SELECTION",SCREEN_TYPE:"SCREEN_TYPE",COMLPETE_WORKFLOW:"COMLPETE_WORKFLOW",COMLPETE_ERROR_WORKFLOW:"COMLPETE_ERROR_WORKFLOW",BANNER:"BANNER",ENTITLEMENT_RETRY:"ENTITLEMENT_RETRY"}},3091:(e,t,n)=>{"use strict";n.d(t,{b:()=>o,v:()=>i});var r=n(9577),o=function(e){var t;console.debug("Creating shadow DOM for selector:",e);var n=document.getElementById("".concat(e));if(!n)throw console.error("Client selector element not found:",e),new Error("App root could not be found. Check your rootId");var o=document.getElementById("opin-widget-wrapper");if(o){console.debug("Found existing opin-widget-wrapper, reusing it");var i=null===(t=o.shadowRoot)||void 0===t?void 0:t.getElementById("opin-widget");if(i)return console.debug("Found existing opin-widget, returning it"),i;o.remove(),console.debug("Removed existing wrapper without proper shadow DOM")}var a=document.createElement("div");a.setAttribute("id","opin-widget-wrapper"),a.setAttribute("style","".concat(n.style.cssText)),n.appendChild(a),localStorage.setItem("opin-selector",e);var s=null==a?void 0:a.attachShadow({mode:"open",delegatesFocus:!0});if(!s)throw console.error("Failed to attach shadow root"),new Error("Shadow root could not be attached");var c=document.createElement("div");c.setAttribute("id","opin-widget");return c.setAttribute("style","".concat(a.style.cssText," ").concat("margin: 0 auto; display: flex; justify-content: center; align-items: center;")),s.appendChild(c),requestAnimationFrame(function(){requestAnimationFrame(function(){console.debug("Shadow DOM fully rendered, triggering style injection");var e=r.Z.prototype.instance;e&&(console.debug("Using existing style injector instance"),e.injectStylesInShadowDom()),setTimeout(function(){var e=r.Z.prototype.instance;e&&(console.debug("Using existing style injector instance"),e.injectBannerStylesInShadowDom())},150)})}),c},i=function(){var e=document.getElementById("opin-widget-wrapper");e?(console.debug("Removing shadow DOM"),e.remove()):console.warn("Shadow DOM wrapper not found during removal")}},5161:(e,t,n)=>{"use strict";n.d(t,{_:()=>r});var r=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=null);var n=null!=t?t:localStorage.getItem("opin-selector"),r=document.getElementById(n),o=null==r?void 0:r.firstElementChild,i=null==o?void 0:o.shadowRoot,a=null==i?void 0:i.getElementById("opin-widget"),s=e?r:a;return{subscribe:function(e,t){s&&s.addEventListener(e,t)},unsubscribe:function(e,t){s&&s.removeEventListener(e,t)},publish:function(e,t){var n=new CustomEvent(e,{detail:t});s&&s.dispatchEvent(n)}}}},9577:(e,t,n)=>{"use strict";n.d(t,{Z:()=>i});var r=null;function o(e){if(r)return r;return console.debug("Style injection initialized"),r={injectStylesInShadowDom:function(){var t=localStorage.getItem("opin-selector"),n=document.getElementById(t),r=null==n?void 0:n.firstElementChild,o=null==r?void 0:r.shadowRoot;if(console.debug("Injecting styles:",{clientSelector:t,shadowHostFound:!!n,wrapperFound:!!r,shadowRootFound:!!o}),o)try{if(Object.prototype.hasOwnProperty.call(window.ShadowRoot.prototype,"adoptedStyleSheets")&&"replaceSync"in CSSStyleSheet.prototype){var i=new CSSStyleSheet;i.replaceSync(e.innerHTML),o.adoptedStyleSheets=[o.adoptedStyleSheets||[],i].flat()}else{var a=document.createElement("style");a.setAttribute("data-opin-injected","true"),a.textContent=e.innerHTML,o.appendChild(a)}console.debug("Styles successfully injected")}catch(e){console.error("Error injecting styles:",e)}else console.error("Shadow root not found during style injection")},injectBannerStylesInShadowDom:function(){var e,t=localStorage.getItem("opin-selector"),n=document.getElementById(t),r=null==n?void 0:n.firstElementChild,o=null==r?void 0:r.shadowRoot;if(o)try{var i=document.getElementById("opin-banner-style");if(!i)return void console.warn("Banner style element not found");var a=i.innerHTML;if(!((e=a)?!(e.length<10&&(console.warn("Style content is suspiciously short, might be invalid"),1)):(console.warn("Style content is empty or undefined"),0)))return;if(Object.prototype.hasOwnProperty.call(window.ShadowRoot.prototype,"adoptedStyleSheets")&&"replaceSync"in CSSStyleSheet.prototype){var s=new CSSStyleSheet;s.replaceSync(a),o.adoptedStyleSheets=[o.adoptedStyleSheets||[],s].flat()}else{var c=document.createElement("style");c.setAttribute("data-opin-banner-injected","true"),c.textContent=a,o.appendChild(c)}console.debug("Banner styles successfully injected")}catch(e){console.error("Error injecting banner styles:",e)}else console.error("Shadow root not found during banner style injection")},getStyle:function(){return e}}}Object.defineProperty(o,"prototype",{value:{get instance(){return r||console.warn("Style injector instance not initialized yet. Please call injectStyleModule with a style element first."),r}}});const i=o},4606:(e,t,n)=>{var r={"./custom_login":[756,756],"./custom_login/":[756,756],"./custom_login/index":[756,756],"./custom_login/index.ts":[756,756],"./custom_login/service":[6757,757],"./custom_login/service.ts":[6757,757],"./no_login":[4947,947],"./no_login/":[4947,947],"./no_login/index":[4947,947],"./no_login/index.ts":[4947,947],"./no_login/types":[3911,911],"./no_login/types.ts":[3911,911],"./no_login_with_plain_redirect_url":[3124,124],"./no_login_with_plain_redirect_url/":[3124,124],"./no_login_with_plain_redirect_url/index":[3124,124],"./no_login_with_plain_redirect_url/index.ts":[3124,124],"./oauth_service":[3716],"./oauth_service/":[3716],"./oauth_service/index":[3716],"./oauth_service/index.ts":[3716],"./oauth_service/service":[4812],"./oauth_service/service.ts":[4812],"./oauth_service/types":[1735,735],"./oauth_service/types.ts":[1735,735],"./on_network_only":[8928,928],"./on_network_only/":[8928,928],"./on_network_only/index":[8928,928],"./on_network_only/index.ts":[8928,928],"./on_network_only/service":[6945,945],"./on_network_only/service.ts":[6945,945],"./on_network_only/types":[8765,765],"./on_network_only/types.ts":[8765,765],"./one_click_connect":[8587,587],"./one_click_connect/":[8587,587],"./one_click_connect/index":[8587,587],"./one_click_connect/index.ts":[8587,587],"./one_click_connect/service":[9074,74],"./one_click_connect/service.ts":[9074,74],"./one_click_connect/types":[1007,7],"./one_click_connect/types.ts":[1007,7],"./one_click_redirect":[2452,131],"./one_click_redirect/":[2452,131],"./one_click_redirect/index":[2452,131],"./one_click_redirect/index.ts":[2452,131],"./one_click_redirect/service":[1073,73],"./one_click_redirect/service.ts":[1073,73],"./one_click_redirect/types":[9850,850],"./one_click_redirect/types.ts":[9850,850],"./partner_connect":[8874],"./partner_connect/":[8874],"./partner_connect/index":[8874],"./partner_connect/index.ts":[8874],"./saml2":[8252,252],"./saml2/":[8252,252],"./saml2/index":[8252,252],"./saml2/index.ts":[8252,252],"./saml2/service":[8407,407],"./saml2/service.ts":[8407,407],"./saml2/types":[2038,38],"./saml2/types.ts":[2038,38],"./two_fa":[4739,739],"./two_fa/":[4739,739],"./two_fa/index":[4739,739],"./two_fa/index.ts":[4739,739],"./two_fa/service":[1808,808],"./two_fa/service.ts":[1808,808],"./two_fa/types":[9098,98],"./two_fa/types.ts":[9098,98]};function o(e){if(!n.o(r,e))return Promise.resolve().then(()=>{var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t});var t=r[e],o=t[0];return Promise.all(t.slice(1).map(n.e)).then(()=>n(o))}o.keys=()=>Object.keys(r),o.id=4606,e.exports=o},9455:e=>{"use strict";e.exports=JSON.parse('{"port":443,"builtBackendVersion":"v1","translationTags":{"checkEntitlement":"entitlements","detectPartners":"detect"},"apiCodes":{"apiCallErrorTypes":{"subscriptionExpired":"subscription_expired","subscriptionNotFound":"subscription_not_found","subscriptionCallFailed":"subscription_call_failed","oauthSecurityTokenMismatch":"oauth_security_token_mismatch"}}}')}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,exports:{}};return o[e](n,n.exports,a),n.exports}a.m=o,a.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return a.d(t,{a:t}),t},t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__,a.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"==typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"==typeof n.then)return n}var o=Object.create(null);a.r(o);var i={};e=e||[null,t({}),t([]),t(t)];for(var s=2&r&&n;"object"==typeof s&&!~e.indexOf(s);s=t(s))Object.getOwnPropertyNames(s).forEach(e=>i[e]=()=>n[e]);return i.default=()=>n,a.d(o,i),o},a.d=(e,t)=>{for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=e=>Promise.all(Object.keys(a.f).reduce((t,n)=>(a.f[n](e,t),t),[])),a.u=e=>({7:"b76184cbb49daca6d704",38:"c8a857c90a6fc3b5bf7f",73:"3bf0d773ee2d56be1829",74:"b43e9c5bd9706955df62",98:"481c62c673593bed11cf",124:"ac35a4da5aec77e619ca",131:"ae88e44b88fc16a6850f",216:"9da19c3d13c5485f9a20",252:"761500ce9402b10abab0",407:"588cad7342f80bdf232d",587:"062046452806ad9ed757",723:"53e3813f96ad6b438fc3",735:"b12edc1c58c3872a95eb",739:"7940fab844e2fa66462b",756:"fd3aa1d28c7d0b99c217",757:"77b250c04a821ce3827d",765:"14b965cc7869a23a12f3",808:"7a6383ed95c7553afd0f",850:"f248c018add133d7359c",911:"1e68bee68a35133f6ea5",918:"d4d03f5259aa72c6d63d",920:"e7d568d4098629bf9e62",928:"c889cd93658f69b2eae6",945:"0b1ce6099cf238298de2",947:"46ee7771dd47a2439e09"}[e]+".bundle.js?h="+{7:"4fdd474ad1d6a2ee5bed",38:"815b081473e941e619b9",73:"7d7bc993b640afd20ae5",74:"36a0fd1cae815363483f",98:"3346cb1d8c351f6146b9",124:"5baad261a29806f25e5a",131:"739969632354b4835bd9",216:"346a6c9bec95b3de9c76",252:"aa0dceb889caff2192b4",407:"75d2a33b110051c283fa",587:"d326193d0257b9d6de1b",723:"556019e7a20a4d004c11",735:"eb99650b2197f9df56a0",739:"c643bbdb738539a305f8",756:"f816620969dc2f604dd6",757:"6ae887e4477becb125fb",765:"65941418076fc3f8a464",808:"d5ad3f48fff3ac4c73fe",850:"667f369160b44cba4cec",911:"41b4a90308e58619f8a8",918:"f58fd07d7713d90120c0",920:"6ae058074e1a77a79e7e",928:"28db09a50b1946c48c21",945:"b19c77ce38b41dbee537",947:"ed195ee978715d0073f6"}[e]),a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n={},r="OPiN:",a.l=(e,t,o,i)=>{if(n[e])n[e].push(t);else{var s,c;if(void 0!==o)for(var u=document.getElementsByTagName("script"),l=0;l<u.length;l++){var d=u[l];if(d.getAttribute("src")==e||d.getAttribute("data-webpack")==r+o){s=d;break}}s||(c=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,a.nc&&s.setAttribute("nonce",a.nc),s.setAttribute("data-webpack",r+o),s.src=e),n[e]=[t];var f=(t,r)=>{s.onerror=s.onload=null,clearTimeout(p);var o=n[e];if(delete n[e],s.parentNode&&s.parentNode.removeChild(s),o&&o.forEach(e=>e(r)),t)return t(r)},p=setTimeout(f.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=f.bind(null,s.onerror),s.onload=f.bind(null,s.onload),c&&document.head.appendChild(s)}},a.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e})(),(()=>{var e={179:0};a.f.j=(t,n)=>{var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((n,o)=>r=e[t]=[n,o]);n.push(r[2]=o);var i=a.p+a.u(t),s=new Error;a.l(i,n=>{if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;s.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",s.name="ChunkLoadError",s.type=o,s.request=i,r[1](s)}},"chunk-"+t,t)}};var t=(t,n)=>{var r,o,[i,s,c]=n,u=0;if(i.some(t=>0!==e[t])){for(r in s)a.o(s,r)&&(a.m[r]=s[r]);if(c)c(a)}for(t&&t(n);u<i.length;u++)o=i[u],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0},n=self.webpackChunkOPiN=self.webpackChunkOPiN||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var s={};return(()=>{"use strict";a.d(s,{default:()=>ie});var e,t,n=a(8736),r=function(){this.ENGLISH_LANG="en_US",this.cookieSessionEnv={dev:n.q.dev,stag:n.q.stag,prod:n.q.prod,default:n.q.default}},o=a(9455),i=a.t(o,2),c=(e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}),u=function(){return u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},u.apply(this,arguments)},l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.generateConfigs=function(){return u({},i)},t}(r);!function(e){e.PARTNER_UID="partner_configuration_uid",e.PARTNER_NAME="partner_name",e.PARTNER_CONGIF_NAME="partner_configuration_name",e.PARTNER_TYPE="partner_type",e.LOGO="logo",e.CONTAINER_WIDTH="container_width",e.CONTAINER_HEIGHT="container_height",e.DESCRIPTION="description",e.SUPPORT_DESCRIPTION="support_description",e.SHORT_DESCRIPTION="short_description",e.LOGGED_IN_SHORT_DESCRIPTION="logged_in_short_description",e.GAME_PAGE_DESCRIPTION="game_page_description",e.LOGGED_IN_GAME_PAGE_DESCRIPTION="logged_in_game_page_description",e.GET_STARTED_BUTTON="get_started_button",e.LOGGED_OUT_TRANSLATION="logout_button_translation",e.LOGIN_TYPE="login_type",e.NBA_USER_ID="user_id",e.LOGIN_REDIRECT="login_redirect",e.ADDITIONAL_TRANSLATIONS="additional_translations",e.IS_ACTIVATED="is_activated",e.LINKED_STATUS="linked_status",e.TRANSACTION_IDENTIFIER="transaction_identifier",e.PARTNER_CATEGORY="partner_category",e.PARTNER_LOCKUP_LOGO="partner_lock_up_logo",e.LINK_REDIRECT_URL="link_redirect_url"}(t||(t={}));var d,f,p,h,y=t,_=(y.GET_STARTED_BUTTON,y.DESCRIPTION,y.LOGGED_OUT_TRANSLATION,y.SHORT_DESCRIPTION,y.GAME_PAGE_DESCRIPTION,y.LOGGED_IN_SHORT_DESCRIPTION,y.LOGGED_IN_GAME_PAGE_DESCRIPTION,y.ADDITIONAL_TRANSLATIONS,a(1272)),w=a(7655);!function(e){e.SERVER_DOWN="OPIN_DOWN",e.TERMINATED="OPIN_TERMINATED",e.NBA_USER_ID_REQUIRED="NBA_USER_ID_REQUIRED",e.SOMETHING_WENT_WRONG="SOMETHING_WENT_WRONG",e.SUBSCRIPTION_EXPIRED="OPIN_SUBSCRIPTION_EXPIRED",e.NO_WORKFLOW_RESPONSE="NO WORKFLOW RESPONSE FOUND"}(d||(d={})),function(e){e.SESSION_BASED="session_based",e.TRANSACTION_BASED="transaction_based"}(f||(f={})),function(e){e.NO_LOGIN="no_login",e.OAUTH="oauth_service",e.CUSTOM="custom_login",e.TWO_FA="two_fa",e.SAML2="saml2",e.ON_NETWORK_ONLY="on_network_only"}(p||(p={})),function(e){e.NO_SESSION_FOUND="NO_SESSION_FOUND",e.UID_MISMATCH="PARTNER_CONFIGURATION_UID_MISMATCH",e.SESSION_EXPIRED="SESSION_EXPIRE"}(h||(h={}));var v,g,b=Object.assign({},d,h);!function(e){e.PARTNER_UID="partner_uid",e.SUBSCRIPTION_DATA="subscription_data",e.SUBSCRIPTION_ERROR="subscription_error",e.LOGIN="login_success",e.LOGOUT="logout_success"}(v||(v={})),function(e){e.OPINTOKEN="opintoken",e.OPIN_TRANSLATIONS="opin_translations"}(g||(g={}));var m=a(3178),S=a(4812),E=a(3091),O=function(){return O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},O.apply(this,arguments)},P=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},k=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},T=function(){function e(e){this.data=e,this.opinUserId=""}return e.prototype.getConfigurationUid=function(){return this.get(t.PARTNER_UID)},e.prototype.getName=function(){return this.get(t.PARTNER_NAME)},e.prototype.getLogo=function(){return this.get(t.LOGO)},e.prototype.getDescription=function(){return this.get(t.DESCRIPTION)},e.prototype.getShortDescription=function(){return this.get(t.SHORT_DESCRIPTION)},e.prototype.getGamePageDescription=function(){return this.get(t.GAME_PAGE_DESCRIPTION)},e.prototype.getStartButtonText=function(){return this.get(t.GET_STARTED_BUTTON)},e.prototype.getLogoutTranslationButtonText=function(){return this.get(t.LOGGED_OUT_TRANSLATION)||"Logout"},e.prototype.getConfigurationName=function(){return this.get(t.PARTNER_CONGIF_NAME)},e.prototype.getType=function(){return this.get(t.PARTNER_TYPE)},e.prototype.getLoginType=function(){return this.get(t.LOGIN_TYPE)},e.prototype.get=function(e){if(!_.d.isString(this.data))return this.data=this.data,this.data[e]},e.prototype.setOpinUserID=function(e){this.opinUserId=e},e.prototype.getOpinUserID=function(){return this.opinUserId},e.prototype.removeOpinUserID=function(){this.opinUserId=""},e.prototype.getContainerHeight=function(){return this.get(t.CONTAINER_HEIGHT)},e.prototype.getContainerWidth=function(){return this.get(t.CONTAINER_WIDTH)},e.prototype.getSupportDescription=function(){return this.get(t.SUPPORT_DESCRIPTION)},e.prototype.getPartnerCategory=function(){return this.get(t.PARTNER_CATEGORY)},e.prototype.getPartnerLockupLogo=function(){return this.get(t.PARTNER_LOCKUP_LOGO)},e.prototype.getLinkedStatus=function(){var e=this.get(t.LINKED_STATUS);if(void 0!==e)return e;throw _.d.throwError("Linking status not found")},e.prototype.getTransactionId=function(){var e=this.get(t.TRANSACTION_IDENTIFIER);if(e)return e;throw _.d.throwError("Transaction Id not found")},e.prototype.getActivationStatus=function(){var e=this.get(t.IS_ACTIVATED);if(void 0!==e)return e;throw _.d.throwError("Activation status not found")},e.prototype.getRedirectUrl=function(){var e=this.get(t.LINK_REDIRECT_URL);if(void 0!==e)return e;throw _.d.throwError("The redirect link has not been configured.")},e.prototype.executeWorkflow=function(e,t){return void 0===e&&(e={}),void 0===t&&(t={}),P(this,void 0,Promise,function(){var n,r,o;return k(this,function(i){switch(i.label){case 0:if("object"!=typeof t)return[2,_.d.throwError(new SyntaxError("Parameter passed in executeWorkflow should be an object."))];if(Object.hasOwn(t,"override_redirect_url"))try{if(!t.override_redirect_url)return[2,_.d.throwError(new SyntaxError("Value passed in override_redirect_url should be an URL."))];new URL(t.override_redirect_url)}catch(e){return[2,_.d.throwError(new SyntaxError("Value passed in override_redirect_url should be an URL."))]}return(0,E.v)(),m.Z.setState(O(O({},m.Z.getState()),{executeWorkflowOption:t})),[4,a(4606)("./".concat(this.getLoginType()))];case 1:return n=i.sent(),r=n.default,(null==e?void 0:e.ciam_jwt)&&(o={"x-ciam-jwt":e.ciam_jwt},m.Z.setState(O(O({},m.Z.getState()),{executeWorkflowHeaders:o}))),[2,new r(this).initiateWorkflow(O({partnerConfigUid:this.getConfigurationUid(),executeWorkflowOption:t},"no_login_with_plain_redirect_url"===this.getLoginType()&&{redirectUrl:this.getRedirectUrl()}))]}})})},e.prototype.syncTranslations=function(t){return P(this,void 0,Promise,function(){var n,r,o;return k(this,function(i){switch(i.label){case 0:return n={translation_tags:"sdk_data"},t&&(n.translation_tags=t.translationTags),[4,(new w.Z).getPartnerData(this.getConfigurationUid(),n)];case 1:return r=i.sent(),(o=new e(O(O({},this.data),r))).setOpinUserID(r.partner_configuration_uid),[2,o]}})})},e.prototype.checkEntitlement=function(){return P(this,void 0,void 0,function(){var e,t,r,o,i,a,s;return k(this,function(c){switch(c.label){case 0:if(!(e=(new n.Z).getCookieSession()))throw{type:b.NO_SESSION_FOUND};return t=JSON.parse(decodeURIComponent(e)),r=t.pcid,o=t.tid,i={transaction_identifier:o},[4,(new w.Z).getLogId(r)];case 1:return a=c.sent(),m.Z.setState(O(O({},m.Z.getState()),{logId:a})),this.getType()!==f.SESSION_BASED||this.getLoginType()!==p.OAUTH?[3,3]:[4,(new S.default).getRefreshToken(r,i)];case 2:s=c.sent(),i=O({},s.response.data),c.label=3;case 3:return[4,(new w.Z).checkEntitlement(r,i,!0)];case 4:return[2,c.sent().data]}})})},e}(),I=a(9346),R=a(5161),N=a(7772),C=a(1806),x=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},D=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},A=function(){function e(e){this.opinInstance=e,this.validateBannerSelector=function(e){return e?"string"!=typeof e?_.d.throwError(new SyntaxError("Banner selector should be a string and a Valid DOM selector.")):void 0:_.d.throwError(new SyntaxError("A DOM Selector is mandatory to show the banner UI for Login Types."))},console.log(e)}return e.prototype.initiateBannerWorkflow=function(e,t,n){var r=this;return new Promise(function(o,i){return x(r,void 0,void 0,function(){var r;return D(this,function(a){switch(a.label){case 0:this.validateBannerSelector(t),a.label=1;case 1:return a.trys.push([1,3,,4]),this.onExecuteWorkflowResolve=o,this.onExecuteWorkflowReject=i,[4,(0,I.$)({selector:t,type:"banner",screenData:e})];case 2:return a.sent(),this.completeWorkflow(n),[2,this.onExecuteWorkflowResolve()];case 3:return r=a.sent(),new C.Z(i,r).init(),[3,4];case 4:return[2]}})})})},e.prototype.completeWorkflow=function(e){var t=this,n=localStorage.getItem("banner-selector");(0,R._)(!1,n).subscribe(N.f.BANNER,function(n){var r=n.detail;return x(t,void 0,void 0,function(){var t,n,o,i;return D(this,function(s){try{a(4606)("./".concat(r.login_type)),t=new this.opinInstance.Partner(r),n=r.banner_details.button_details.action,o=r.banner_details.button_details.open_link_as,i=r.banner_details.button_details.link,"Sign-in"!==n&&"Sign-out"!==n||e(null,{actionType:n,partnerData:t}),"Link"===n&&"Newtab"===o&&window.open(i,"_blank"),"Link"===n&&"Redirect"===o&&window.open(i,"_self")}catch(e){new C.Z(this.onExecuteWorkflowReject,e).init()}return[2]})})})},e}(),j=a(1567);const L=JSON.parse('{"geo_locations":[{"their":"countryCode","ours":"country_code"}],"ip_address":[{"their":"External IP","ours":"external_ip"}]}'),Z=JSON.parse('[{"their":"mediaProperties","ours":"additional_filters"},{"their":"loaderImage","ours":"loader"},{"their":"env","ours":"env"},{"their":"session","ours":"session"},{"their":"cookieDomain","ours":"cookieDomain"},{"their":"workFlow","ours":"workFlow"},{"their":"cookieDomain","ours":"cookieDomain"}]');function U(e){var t=L,n={supported_platform:"web",version:3,baseURL:encodeURIComponent(e.baseURL),check_entitlements_tags:o.translationTags.checkEntitlement};return e.surfaceType&&(n.surface_type=e.surfaceType),Object.keys(t).map(function(r){n[r]={},t[r].map(function(t){e.hasOwnProperty(t.their)&&(n[r][t.ours]=e[t.their])})}),Z.map(function(t){n[t.ours]=e[t.their]}),{query:n}}function F(e){var t={};return["supported_platform","version","baseURL","geo_locations","ip_address","additional_filters"].forEach(function(n){t[n]=e[n]}),Object.hasOwn(e,"surface_type")&&(t.surface_type=e.surface_type),t}const W=function(){function e(e){this.opinInstance=e,this._option=this.opinInstance.options}return e.prototype.validateOptions=function(){var e=this._option,t=e.mediaProperties,n=e.baseURL,r=e.cookieDomain,o=e.env,i=e.workFlow;if(_.d.objectIsEmpty(this._option)||!_.d.isObject(this._option))return _.d.throwError(new SyntaxError("Please ensure that the option data is both mandatory and valid."));if(!t)return _.d.throwError(new SyntaxError('Required: Please specify "media_properties".'));if(!Array.isArray(t))return _.d.throwError(new SyntaxError('Please ensure "media_properties" is specified as an Array.'));if(!t.every(function(e){return"string"==typeof e}))return _.d.throwError(new SyntaxError('Required: "media_properties" must be an array of strings with at least one element.'));if(!n)return _.d.throwError(new SyntaxError('Required: Please provide a valid "baseURL" in the options.'));if(_.d.isURLValid(n)){if(r&&"string"!=typeof r)return _.d.throwError(new SyntaxError('Please ensure "cookieDomain" is specified as a string.'));if(!o)return _.d.throwError(new SyntaxError('Required: Please provide "env".'));if(!["dev","stag","prod"].includes(o))return _.d.throwError(new SyntaxError('Required: "env" must be a string and should be one of "dev | stag | prod".'));if(!i)return _.d.throwError(new SyntaxError('Required: "workFlow" must be provided as an object.'));if(!Object.hasOwn(i,"entitlementScreen"))return _.d.throwError(new SyntaxError('Required: "entitlementScreen" is mandatory within the "workFlow" object.'));var a=i.entitlementScreen,s=i.selector;return"boolean"!=typeof a?_.d.throwError(new SyntaxError('Please ensure "entitlementScreen" is specified as a true or false')):s?"string"!=typeof s?_.d.throwError(new SyntaxError('Please ensure "selector" is specified as a valid DOM selector and is of type string.')):void 0:_.d.throwError(new SyntaxError('Required: "selector" is mandatory within the "workFlow" object.'))}},e.prototype.setDynamicHost=function(){var e=m.Z.getState(),t=new URL(this._option.baseURL||"");e.config.host=t.host||"",e.config.pathname=t.pathname||"",e.config.protocol=t.protocol||"https:"},e}();var G=a(3716),H=a(9401),M=a(8874),B=a(8320),K=a(9134),q=function(){return q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},q.apply(this,arguments)},J=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},Y=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};var V=function(){function e(){var e=this;this.urlParams=new URLSearchParams(window.location.search),this.loginType="",this.getLoginTypeModule=function(t){return new Promise(function(n){return J(e,void 0,void 0,function(){var e;return Y(this,function(r){switch(r.label){case 0:switch(t){case"saml2":return[3,1];case"one_click_connect":return[3,3];case"one_click_redirect":return[3,5];case"partner_connect":return[3,7];case"oauth_service":return[3,8]}return[3,9];case 1:case 3:case 5:return[4,a(4606)("./".concat(this.loginType))];case 2:case 4:case 6:return e=r.sent(),n(e.default),[3,9];case 7:return n(M.default),[3,9];case 8:return n(G.default),[3,9];case 9:return[2]}})})})}}return e.prototype.hasWorkflowResponse=function(){return this.urlParams.has("opin_status")&&this.urlParams.has("state")},e.prototype.getWorkflowResponse=function(){var e=this;return this.handleRedirectUri(),new Promise(function(t,n){return J(e,void 0,void 0,function(){var e,r,o,i,a,s,c,u,l,d,f,p,h;return Y(this,function(y){switch(y.label){case 0:if(y.trys.push([0,5,,6]),e=this.urlParams.get("state"),null==e)throw new Error("Missing 'state' parameter.");return r=JSON.parse(decodeURIComponent(e)),this.loginType=r.login_type,"one_click_connect"===this.loginType&&localStorage.setItem("journey",this.loginType),o=m.Z.getState(),i=o.workFlow.selector,a={loader:null===(h=o.workFlow)||void 0===h?void 0:h.loader},(null==r?void 0:r.custom_loader_message)&&(a.custom_loader_message=null==r?void 0:r.custom_loader_message),o.workFlow.entitlementScreen&&"one_click_redirect"!==this.loginType?[4,(0,I.$)({selector:i,type:"loader",screenData:a})]:[3,2];case 1:y.sent(),y.label=2;case 2:return m.Z.setState(q(q({},m.Z.getState()),((p={})[this.loginType]={resolve:t,reject:n,loginType:this.loginType},p))),[4,this.getLoginTypeModule(this.loginType)];case 3:return[4,(new(y.sent())).completeWorkflow(r,this.loginType)];case 4:return s=y.sent(),c=s.partnerConfigUid,u=s.entitlementResponse,l=u.transaction_identifier,"selection_screen"===u.type?[2,new B.Z(t,n).init(c,q(q({},u),{transaction_identifier:l}))]:(new H.Z(t,u).init(c,this.loginType),[3,6]);case 5:return d=y.sent(),f=d,n(new K.Z(f).init()),[3,6];case 6:return[2]}})})})},e.prototype.handleRedirectUri=function(){var e=new URL(window.location.href),t=e.searchParams.get("redirect_uri")||"",n=e.searchParams.has("redirect_uri");e.searchParams.delete("redirect_uri"),window.history.replaceState({},"",e.href),m.Z.setState(q(q({},m.Z.getState()),{isRedirect:n,redirectUrl:t}))},e}();const $=V;var X=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Q=function(){return Q=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},Q.apply(this,arguments)},z=function(e,t,n,r){return new(n||(n=Promise))(function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,s)}c((r=r.apply(e,t||[])).next())})},ee=function(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(s){return function(c){return function(s){if(n)throw new TypeError("Generator is already executing.");for(;i&&(i=0,s[0]&&(a=0)),a;)try{if(n=1,r&&(o=2&s[0]?r.return:s[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,s[1])).done)return o;switch(r=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return a.label++,{value:s[1],done:!1};case 5:a.label++,r=s[1],s=[0];continue;case 7:s=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==s[0]&&2!==s[0])){a=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){a.label=s[1];break}if(6===s[0]&&a.label<o[1]){a.label=o[1],o=s;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(s);break}o[2]&&a.ops.pop(),a.trys.pop();continue}s=t.call(e,a)}catch(e){s=[6,e],r=0}finally{n=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}},te=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n},ne=function(e){function t(t){var n,r,o,i=this;(i=e.call(this)||this).options=t,a.e(723).then(a.bind(a,5723));var s=new W(i);s.validateOptions(),i.locale=j.Hj,i.countryCode="";var c=e.prototype.generateConfigs.call(i),u=i.setWorkflowValue(t.workFlow),l=null!==(n=null==t?void 0:t.env)&&void 0!==n?n:"default",d=null!==(r=null==t?void 0:t.cookieDomain)&&void 0!==r?r:"";return m.Z.setState(Q(Q(Q(Q({},m.Z.getState()),{config:c,locale:i.locale}),t),{env:l,cookieDomain:d,workFlow:u})),s.setDynamicHost(),i.WorkflowResponse=new $,u.entitlementScreen&&(localStorage.setItem("opin-selector",null===(o=null==t?void 0:t.workFlow)||void 0===o?void 0:o.selector),Promise.all([a.e(920),a.e(216)]).then(a.bind(a,3098))),i}return X(t,e),t.prototype.setLocale=function(e){this.locale=e,m.Z.setState(Q(Q({},m.Z.getState()),{locale:e}))},t.prototype.getLocale=function(){return this.locale},t.prototype.setCountryCode=function(e){/^[A-Z]{2}$/.test(e)||_.d.throwError("Invalid country code ".concat(e," provided.")),this.countryCode=e,m.Z.setState(Q(Q({},m.Z.getState()),{countryCode:e}))},t.prototype.getCountryCode=function(){return this.countryCode},t.prototype.hasWorkflowResponse=function(){return this.WorkflowResponse.hasWorkflowResponse()},t.prototype.getWorkflowResponse=function(){return this.WorkflowResponse.getWorkflowResponse()},t.prototype.detectPartners=function(e){return z(this,void 0,Promise,function(){var t,n,r,o;return ee(this,function(i){switch(i.label){case 0:return t=m.Z.getState(),null===localStorage.getItem("opin-selector")&&localStorage.setItem("opin-selector",t.workFlow.selector),_.d.isObject(e)||_.d.throwError("Init data should be an object"),e=Object.assign(e,this.options),n=U(e),r=F(n.query),[4,(new w.Z).detectPartners(JSON.stringify(r))];case 1:return[2,(o=i.sent()).partners.map(function(e){return a(4606)("./".concat(e.login_type)),e.host=o.host,new T(e)})]}})})},t.prototype.detectBanners=function(e,t,n){return z(this,void 0,void 0,function(){var r,o,i,a=this;return ee(this,function(s){switch(s.label){case 0:return null===localStorage.getItem("banner-selector")&&localStorage.setItem("banner-selector",t),_.d.isObject(e)||_.d.throwError("init data should be an object."),e=Object.assign(e,this.options),r=U(e),(o=F(r.query)).is_logged_in=!1,m.Z.setState(Q(Q({},m.Z.getState()),{queryParams:o})),this.hasLoggedInPartner()?[2,this.getLoggedInPartner().then(function(e){return z(a,void 0,void 0,function(){var r;return ee(this,function(i){switch(i.label){case 0:return e&&(o.partner_conf_uid=e.getConfigurationUid(),o.is_logged_in=!0,m.Z.setState(Q(Q({},m.Z.getState()),{queryParams:o}))),[4,(new w.Z).detectBanners(JSON.stringify(o))];case 1:return r=i.sent(),[2,new A(this).initiateBannerWorkflow(r,t,n)]}})})})]:[4,(new w.Z).detectBanners(JSON.stringify(o))];case 1:return i=s.sent(),[2,new A(this).initiateBannerWorkflow(i,t,n)]}})})},t.prototype.Partner=function(e){return new T(e)},t.prototype.hasLoggedInPartner=function(){return!!(new n.Z).getCookieSession()},t.prototype.generateFP=function(){_.d.generateFP().then(function(e){return console.log(e)})},t.prototype.getLoggedInPartner=function(){var e=this,t=(new n.Z).getCookieSession();return new Promise(function(n,r){if(t)return e.getPartnerData(t).then(function(e){return n(e)});r(_.d.throwError("No loggedin partner found."))})},t.prototype.getPartnerData=function(e){return z(this,void 0,Promise,function(){var t,n,r,o;return ee(this,function(i){switch(i.label){case 0:return t=JSON.parse(decodeURIComponent(e)).pcid,n={translation_tags:"sdk_data"},[4,(new w.Z).getPartnerData(t,n)];case 1:return r=i.sent(),(o=new T(r)).setOpinUserID(r.partner_configuration_uid),[2,o]}})})},t.prototype.extractCiamJwt=function(e){var t={};if("ciam_jwt"in e&&e.ciam_jwt){t["x-ciam-jwt"]=e.ciam_jwt;e.ciam_jwt;return{cleanPayload:te(e,["ciam_jwt"]),headers:t}}return{cleanPayload:Q({},e),headers:t}},t.prototype.getPartnerDetails=function(e){return z(this,void 0,void 0,function(){var t,n,r,o;return ee(this,function(i){switch(i.label){case 0:return t=this.extractCiamJwt(e),n=t.cleanPayload,r=t.headers,[4,(new w.Z).getPartnerDetails(n,r)];case 1:return o=i.sent(),[2,new T(o)]}})})},t.prototype.getPartnerInfo=function(e){return z(this,void 0,void 0,function(){var t;return ee(this,function(n){switch(n.label){case 0:return[4,(new w.Z).getPartnerInfo(e)];case 1:return t=n.sent(),[2,new T(t)]}})})},t.prototype.getPartnerList=function(e){return z(this,void 0,void 0,function(){var t,n,r,o,i,s,c,u,l;return ee(this,function(d){switch(d.label){case 0:return t=e.countryCode,n=te(e,["countryCode"]),r={countryCode:t},r=Object.assign(r,this.options),o=U(r),i=F(o.query),s=this.extractCiamJwt(n),c=s.cleanPayload,u=s.headers,l=Q(Q({},c),{filteration_criteria:JSON.stringify(i)}),[4,(new w.Z).getPartnerList(l,u)];case 1:return[2,d.sent().map(function(e){return a(4606)("./".concat(e.login_type)),new T(e)})]}})})},t.prototype.unlinkPartnerAccount=function(e){var t=this.extractCiamJwt(e),n=t.cleanPayload,r=t.headers;return(new w.Z).unlinkPartnerAccount(n,r)},t.prototype.unlinkAllPartnerAccounts=function(e){var t=this.extractCiamJwt(e),n=t.cleanPayload,r=t.headers;return(new w.Z).unlinkAllPartnerAccounts(n,r)},t.prototype.clearPartnerSession=function(){return this.logout()},t.prototype.logout=function(){return new Promise(function(e){(new n.Z).clearSession(),e("")})},t.prototype.setWorkflowValue=function(e){var t,n,r=e.entitlementScreen,o=(null===(t=null==e?void 0:e.loader)||void 0===t?void 0:t.color)&&encodeURIComponent(null===(n=null==e?void 0:e.loader)||void 0===n?void 0:n.color);return e.loader=Q(Q({},null==e?void 0:e.loader),{color:o}),Q(Q({},e),{entitlementScreen:void 0===r||r,loader:(null==e?void 0:e.loader)||{}})},t}(l);const re=ne;var oe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();const ie=function(e){function t(t){var n=e.call(this,t)||this;return console.log("=====> OPiN <====="),localStorage.getItem("journey")&&localStorage.removeItem("journey"),n}return oe(t,e),t}(re)})(),s=s.default})());